// Project-local debug tasks
//
// For more documentation on how to configure debug tasks,
// see: https://zed.dev/docs/debugger
[
    {
        "label": "Launch SDXL-Turbo",
        "adapter": "Debugpy",
        "request": "launch",
        "program": "$ZED_WORKTREE_ROOT/accelerate_launch.py",
        "cwd": "$ZED_WORKTREE_ROOT",
        "env": {
            // "MODEL_NAME": "stabilityai/sdxl-turbo",
            // "VAE": "madebyollin/sdxl-vae-fp16-fix",
            // "DATASET_NAME": "ymhao/HPDv2",
            "all_proxy": "http://172.31.1.128:12798",
            "REQUESTS_CA_BUNDLE": "/etc/ssl/certs/ca-certificates.crt",
            "SSL_CERT_FILE": "/etc/ssl/certs/ca-certificates.crt"
        },
        "args": [
            "launch",
            "train.py",
            "--pretrained_model_name_or_path=stabilityai/sdxl-turbo",
            "--pretrained_vae_model_name_or_path=madebyollin/sdxl-vae-fp16-fix",
            "--dataset_name=ymhao/HPDv2",
            "--train_batch_size=16",
            "--dataloader_num_workers=16",
            "--gradient_accumulation_steps=128",
            "--max_train_steps=4000",
            "--lr_scheduler=\"constant_with_warmup\"",
            "--lr_warmup_steps=200",
            "--learning_rate=1e-8",
            "--scale_lr",
            "--checkpointing_steps=200",
            "--beta_dpo=5000",
            "--sdxl",
            "--resolution=512",
            "--proportion_empty_prompts=0",
            "--output_dir=\"reproduce-1\"",
            "--caption_column=prompt",
            "--image_column=image"
        ],
        "autoReload": {
            "enable": true
        },
        "jinja": true,
        "justMyCode": true
    }
]
